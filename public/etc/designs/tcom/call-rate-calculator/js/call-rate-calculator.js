+function(a){"use strict";var b,c,d=tcom.callratecalc={},e="Enter country name",f={},g="",h="error",i="error",j="error",k="error",l="error",m=[],n=[null,null,null,null,null,null,null,null,null,null],o=0,p=function(a){return a.charAt(0).toUpperCase()+a.slice(1)};d.addCountry=function(){var c,d=a("#country").val().toUpperCase(),f=(document.getElementById("countryTable"),!1),s=null;for(b=9;b>=0;b--)if(null===n[b]){s=b;break}if(null===s)a("#destination-error").show(),document.getElementById("destination-error").innerHTML="Sorry, the limit of 10 countries has already been reached.";else{c=!1;for(var t=0;t<10;t++)null!==n[t]&&d.toLowerCase()===n[t].toLowerCase()&&(c=!0);if(c===!0)a("#destination-error").show(),document.getElementById("destination-error").innerHTML="Sorry, "+d+" has been already selected. Please check the destination list below.";else{for(b=0;b<countryData.length;b++)if(d.toLowerCase().replace(" ","")===countryData[b][0].toLowerCase().replace(" ","")){f=!0,h=p(countryData[b][0]),i=countryData[b][1].length>5?countryData[b][1].substr(0,5):countryData[b][1],j=countryData[b][2].length>5?countryData[b][2].substr(0,5):countryData[b][2],k=countryData[b][3].length>5?countryData[b][3].substr(0,5):countryData[b][3],l=countryData[b][4].length>5?countryData[b][4].substr(0,5):countryData[b][4];break}if(f===!0){for(g="",a("#destination-error").hide(),m[h]='<br /><br /><table class="table"><tr ><th rowspan="2" width="30%">Destination</th><th rowspan="2" width="20%">Connection Fee<br/>(inc GST)</th><th colspan="3">Voice Call Rates<br/>(per minute)<a class="close" onclick="tcom.callratecalc.removeCountry(\''+h+'\'); return false;" href="#"></a></th></tr><tr ><th width="25%">to Fixed Line<br/>(inc GST)</th><th>to an International<br/>(non-roaming) Mobile<br/>(inc GST)</th></tr><tr><td class="heading-shade-2"><strong>'+h+"</strong></td><td>$0.40</td><td>$"+Number(j).toFixed(2)+'</td><td colspan="2">$'+Number(l).toFixed(2)+"</td></tr></table>",n[s]=h,b=0;b<10;b++)null!==n[b]&&(g+=m[n[b]]);q(g),o++,r()}else a("#destination-error").show(),document.getElementById("destination-error").innerHTML="Sorry, Country "+d+" not found."}}e="",a("#country").val("")};var q=function(a){document.getElementById("countryTable").innerHTML=a};d.removeCountry=function(b){for(m[b]=null,a("#country").val(""),c=0;c<10;c++)if(n[c]===b){n[c]=null;break}for(c=9;c>=1;c--)null===n[c]&&null!==n[c-1]&&(n[c]=n[c-1],n[c-1]=null);for(g="",c=0;c<10;c++)null!==n[c]&&(g+=m[n[c]]);q(g),o--,r()};var r=function(){if(o>0)a("#infoMessage").hide();else{for(a("#infoMessage").show(),o=0,b=0;b<10;b++)n[b]=null;m=[],document.getElementById("countryTable").innerHTML="",a("#destination-error").hide()}},s=function(){f=[],a("#country").addClass("light"),a("#brand").val(""),a("#model").val(""),a("#destination-error").hide(),a("#destination-selected").hide(),a(".call-rate-calculator").show()};s(),""===a("#country").val()&&(a("#country").addClass("light"),a("#country").val(e)),a("#country").focusin(function(b){a(this).val().toLowerCase()===e.toLowerCase()&&(a(this).removeClass("light"),a(this).val(""))}),a("#country").focusout(function(b){a(this).val().toLowerCase()!==e.toLowerCase()&&""!==a(this).val()||(a(this).addClass("light"),a(this).val(e))}),a("#destination-error-close").click(function(b){a(this).parent().parent().fadeOut("fast"),b.preventDefault(),0===f.length&&a("#destination-selected").hide()}),a("#print").click(function(a){return window.print(),!1});var t=a("#country"),u=function(b){return function(c,d){var e,f;e=[],f=new RegExp(c,"i"),a.each(b,function(a,b){f.test(b)&&e.push({value:b})}),d(e)}};t.typeahead({minLength:1,highlight:!0,hint:!1},{name:"irCountrySuggest",source:u(callRateavailableCountries),displayKey:"value",templates:{suggestion:function(a){return"<p>"+a.value+"</p>"}}}),t.on("typeahead:selected",function(a,b){return d.addCountry(),!1})}(jQuery);