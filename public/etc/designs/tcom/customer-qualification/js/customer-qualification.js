!function(a,b){"use strict";b.cqModal=function(){var b,c,d,e,f,g,h,i,j=a(".cq-body .questions"),k=a(".cq-toggle-button"),l=[],m=function(a){var b=a.find(".modal-body");b.css("max-height","none");var c=a.height(),d=a.find(".modal-dialog").height(),e=a.find("[class^=modal-header]").height(),f=parseInt(a.find(".modal-dialog").css("margin-top").replace("px",""));if(d>c){var g=c-3*f-e;b.css("max-height",g)}},n=function(){e=JSON.parse(a(".cart-checkout-button").attr("cart-data")),a(".questions, .cq-option-details, .cq-continue").addClass("hidden"),j.first().removeClass("hidden"),j.each(function(){d=a(this).data("shop-parameter-key"),e[d]=""}),e.returnURL=window.location.href,e.salesChannel=f,e.planCode=h,e.products=l,a(".cart-checkout-button").attr("cart-data",JSON.stringify(e))},o=function(b){a('.cq-option-details[data-option-selection="'+b.find("input:checked").data("option-selection")+'"]').removeClass("hidden"),a('.cq-continue[data-option-selection="'+b.find("input:checked").data("option-selection")+'"]').removeClass("hidden"),m(a(".cq-modal"))};return k.change(function(){a(".cq-option-details, .cq-continue").addClass("hidden"),o(a(this))}),a(".cq-continue a").click(function(){var b=a(this).attr("href"),d=a(this).closest(".questions").attr("id"),h=a(this).closest(".questions").data("shop-parameter-key"),k=a(".cq-option-details"),l=function(){k.addClass("hidden"),j.addClass("hidden")};if(b&&("#"===b?(l(),a(this).closest(".questions").next().removeClass("hidden")):"#"===b.charAt(0)&&b.length>1&&(l(),a('.questions[id="'+b.substring(1)+'"]').removeClass("hidden"))),c={question:d,option:a(this).parent().data("option-selection")},e[h]=a(this).parent().siblings(".cq-toggle-button-container").find("input:checked").data("shop-parameter-value"),e.foxtelCustomerType&&("EXISTING"===e.foxtelCustomerType?e.salesChannel=g:e.salesChannel=f),a(this).hasClass("cart-checkout-button")){if(i){var m=i[e.broadbandCustomerType+"_BROADBAND_CUSTOMER"];m&&e.products.push({code:m})}a(this).attr("cart-data",JSON.stringify(e))}}),a(".cq-modal").on("hidden.bs.modal",function(){a(".questions, .cq-option-details, .cq-continue").addClass("hidden"),k.find("input").prop("checked",!1).closest(".btn").removeClass("active"),a(".cq-body").data("start-from-beginning")||!c?n():c&&(a('.questions[id="'+c.question+'"]').removeClass("hidden"),o(a('.questions[id="'+c.question+'"]').find('.cq-toggle-button input[data-option-selection="'+c.option+'"]').trigger("click")))}),a(".cta-row").find("a.btn").click(function(){var c,d=[];if(b=a(this).closest(".section-cta"),g=b.data("sales-channel-foxtel"),f=b.data("sales-channel"),h=b.data("plan-code"),c=b.data("products")||"",c.indexOf(";")>-1){var j=c.split(";");i=JSON.parse(j[1]||"{}"),d=j[0].split(",")}else d=c.split(",");l=[],d.forEach(function(a){a.length>0&&l.push({code:a})}),e.salesChannel=f,e.planCode=h,e.products=l,a(".cart-checkout-button").attr("cart-data",JSON.stringify(e))}),{init:n}}(),b.cqModal.init()}(jQuery,tcom);